#### ch06-main: 排列组合

从赌场赢了500刀之后，下一步去赌马。

500刀一注，对于参赛的ABC三匹马，猜中顺序的话赔率是7:1. 手工排一下都能知道共有3!=3x2x1=6种，猜中的概率就是1/6。由此可以计算期望```E(X)=(-500)*5/6+3500*1/6=168``` ——就是简单的排序问题，用 n! 代表所有的序列。

有种特殊情况：环形排列不是用n!，__因为环形不考虑f的绝对位置__，如P247图，虽然看似c在f左边、r在f右边的排列有4种（因为f可以在4个位置），但由于这是个“环”所以f在4个位置其实是同一种情况，应该用```n!/n=(n-1)!```. btw，考虑绝对位置的话，就无所谓圆还是直线，都一样了。

对于两组数据的排序，各自排好之后相乘。比如有个电话前三位是1,2,3的排序，后四位是4,5,6,7的排序，那么总共有3!*4!=144种可能。更多组数据可以类推。

好了，接下来赌花样赛。有3匹斑马(z)和3匹普通马(h)同时参赛，如果能猜中6位的z和h排列（如zzzhhh、zhzhzh等）的话，赔率15:1。强调下此时关心的是动物种类（在第几名的位置上的是斑马还是普通马），而不关心具体哪一【__匹__】马跑了第几名。

分析过程：合计6匹马，总共有6!种排列。其中3匹斑马有3!种排列，但因为不关心“匹”只关心“类”，所以3!代表的```z1z2z3, z1z3z2, z2z1z3, z2z3z1, z3z1z2, z3z2z1```对于本问题来说是同一种序列，所以为了避免重复计算，从总数里除去3!；同理，为了避免具体的普通马序列的重复计算，再从结果中除去3!，最后确定对6匹马只考虑动物种类的排列有```6!/(3!*3!)=20```种。

推广一下，n个对象排序，一类相似对象有j个，另一类有k个，若只考虑种类排序，有```n!/(j!*k!)```个排法，还可以继续推广至三类、四类、更多类。
【习题】3匹斑马，2匹普通马，5头骆驼参赛，排名只考虑种类，那么5头骆驼名次连续的概率是多少？先算10个动物的排列数```10!/(3!/2!/5!)=252```.再把5头骆驼扎在一起，相当于看成（1群骆驼，3匹斑马，2匹普通马）的按种类排列，即```6!/(3!*2!)=60```，所以概率是60/252.

花样赛结束，下一轮是20匹马的正赛，猜中前三甲排序的赔率是1500:1。也就是说我们要算从20个对象中取3个进行排序的排列数，直接套公式```n!/(n-r)!=20!/(20-3)!=20!/17!=6840```，其中17!可以这样理解：因为只关心前三甲，后17位不管怎么排都无所谓，所以同上分析过程，为了避免重复计算而从总数里除去。
  
如果不考虑前三甲的__具体排名__(就只管哪三匹马会包揽前三)，那么再除去前三甲的排列数 ```6840/3!=1140```. ——这就是求组合数了，从20个里取3个，有多少种组合？通用公式```n!/[r!(n-r)!]```，可以理解为总排列数n!除去r个【__chosen类__】内排列r!，再除去(n-r)个【__unchosen类__】内排列(n-r)!，联想上面骆驼的例子。

章末有关于篮球队和扑克牌的练习，非常有助于理解。
